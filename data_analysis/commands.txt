for from in merged commonstrict; do to="merged"; if [ $to == "commonstrict" ]; then opts=""; else opts="-r simple"; fi; dir="${to}_bp_ec_se_vc_pf_from_${from}"; mkdir -p $dir; shopt -s nullglob; for tech in gaii-x miseq hiseq ion-torrent pacbio; do egrep -c "^[^# ]" cse_results/{bordetella_pertussis,escherichia_coli,salmonella_enterica_enterica,vibrio_cholerae,plasmodium_falciparum}/*/*/${tech}_${from}_*_d*.data ${dir}/${tech}_counts.txt; for d in 0 0.05; do d2=`echo $d | tr -d .`; n=2; for q in 4 8 10; do simple_motif_merger.py $q $n cse_results/{bordetella_pertussis,escherichia_coli,salmonella_enterica_enterica,vibrio_cholerae,plasmodium_falciparum}/*/*/${tech}_${from}_results_${q}-grams_${n}n_d0.data -d $d $opts > ${dir}/${tech}_${to}_results_${q}-grams_${n}n_d${d2}.data; done; n=4; q=8; simple_motif_merger.py $q $n cse_results/{bordetella_pertussis,escherichia_coli,salmonella_enterica_enterica,vibrio_cholerae,plasmodium_falciparum}/*/*/${tech}_${from}_results_${q}-grams_${n}n_d0.data -d $d $opts > ${dir}/${tech}_${to}_results_${q}-grams_${n}n_d${d2}.data; done; done; shopt -u nullglob; done

from="merged"; output="bp_ec_se_vc_pf_from_${from}"; for tech in gaii-x miseq hiseq ion-torrent pacbio; do echo "# of common motifs for $tech"; file="${tech}_${output}.txt"; rm $file; n=2; for q in 4 8 10; do union=`egrep -c "^[^#]" merged_${output}/${tech}_merged_results_${q}-grams_${n}n_d005.data`; inters=`egrep -c "^[^#]" commonstrict_${output}/${tech}_commonstrict_results_${q}-grams_${n}n_d005.data`; if [[ $union != 0 ]]; then echo -e "$q $n\t| U: $union I: $inters JC: "`echo $inters / $union | bc -l` | tee -a $file; else echo -e "$q $n\t| U: $union I: $inters JC: -" | tee -a $file; fi; done; n=4; q=8; union=`egrep -c "^[^#]" merged_${output}/gaii-x_merged_results_${q}-grams_${n}n_d005.data`; inters=`egrep -c "^[^#]" commonstrict_${output}/${tech}_commonstrict_results_${q}-grams_${n}n_d005.data`; if [[ $union != 0 ]]; then echo -e "$q $n\t| U: $union I: $inters JC: "`echo $inters / $union | bc -l` | tee -a $file; else echo -e "$q $n\t| U: $union I: $inters JC: -" | tee -a $file; fi; echo; done
